{% extends "layout.phtml" %}
{% block body %}
	{% include "header.phtml" %}

	<div class="container">
		<div id="alert-container" class="hidden alert" role="alert"></div>
		<div id="game-section" class="row">

		</div>
	</div>

	<script type="template" id="game-ongoing">
		<div id="game-play-section" class="col-sm-8">
			<div class="game-info">

				<h4>Tokens remaining: [[game.size_bag]]</h4>
			</div>

			<ul id="board">
				[[each board as cell on board_cell]]
			</ul>
			<div id="player-hand">
				[[each player_hand as token on player_token]]
			</div>
			<button id="confirm-play" class="btn btn-primary btn-full-width" disabled>Confirm</button>
		</div>
		<div id="player-scores" class="col-sm-4">
			<h3>Scores:</h3>
			[[each game.game_players as player on player_score]]
		</div>
	</script>

	<script type="template" id="board-token">
		<div class="token" data-value="[[token.value]]">
			[[token.value]]
		</div>
	</script>

	<script type="template" id="player-token">
		<div class="token" id="player-token-[[token.index]]" data-value="[[token.value]]" draggable="true">
			[[token.value]]
		</div>
	</script>

	<script type="template" id="board-cell">
		<li class="cell cell-[[cell.type]]" data-x="[[cell.x]]" data-y="[[cell.y]]">
			[[if cell.token then board_token with cell]]
		</li>
	</script>

	<script type="template" id="game-open">
		Game open
	</script>

	<script type="template" id="game-finished">
		Game finished
	</script>

	<script type="template" id="template-player-score">
		<div class="score" id="score-player-[[player.id_user]]">
			<div class="player-info">
				[[if player.is_turn then player_turn]]
				<div class="player-avatar" id="player-[[player.id_user]]-image"></div>
				<div id="player-[[player.id_user]]">[[player.id_user]]</div>
			</div>
			<div class="player-score">[[player.score]]</div>

		</div>
	</script>

	{% include "game-player-info.phtml" %}
{% endblock %}
{% block scripts %}
	<script type="text/javascript" src="{{ url_for('static', filename='scripts/game.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='scripts/modules/game.page.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='scripts/modules/header.js') }}"></script>
{% endblock %}
